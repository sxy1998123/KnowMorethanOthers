define("home:widget/shitu/carousel/carousel",function(t,i,s){function h(t){this.opts=t||{},this.$root=e("."+this.opts.cls),this.opts.width=this.$root.width(),this.$ul=this.$root.find(".carousel-wrapper"),this.$line=this.$root.find(".shitu-line"),this.$lineLi=this.$line.find("li"),this.opts.length=this.$ul.find("li").length,this.currentIndex=0,this.timer,this.init()}var e=t("common:widget/ui/base/base");e.extend(h.prototype,{init:function(){this.updateSize(),this.timer=setInterval(this.next.bind(this),5e3)},updateSize:function(t){this.opts.width=this.$root.width(),this.$ul.find("li").width(this.opts.width);var i={width:this.opts.length*this.opts.width},s=-(this.opts.length*this.opts.width/2);t&&(this.currentIndex+1===this.opts.length/2?s=(1-this.opts.length/2)*this.opts.width:s-=this.currentIndex*this.opts.width),i.left=s,this.$ul.css(i),this.$line.width(68*this.opts.length/2)},getRootWidth:function(){return this.$root.width()},next:function(){var t=parseInt(this.$ul.css("left"),10)-this.opts.width;this.showCurrent(t)},updateLine:function(t){this.$lineLi.removeClass("active"),this.$lineLi.eq(t).addClass("active"),e(".sub-title").text(window.shituTitles[t])},getCurrentIndex:function(t){return Math.ceil(Math.abs(t/this.opts.width%(this.opts.length/2)))},showCurrent:function(t){var i=this.opts.length*this.opts.width;this.$ul.is(":animated")||(this.currentIndex=this.getCurrentIndex(t),this.$ul.animate({left:t},"slow",function(){0===t?this.$ul.css("left",-i/2):t===(1-this.opts.length)*this.opts.width&&this.$ul.css("left",(1-this.opts.length/2)*this.opts.width),this.updateLine(this.currentIndex)}.bind(this)))}}),s.exports=h});